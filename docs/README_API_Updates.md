# –û–±–Ω–æ–≤–ª–µ–Ω–∏—è API - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç–∫–∞–º–∏

## üÜï –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–∫
- **GET** `/patients` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–∫ –∏–∑ –ë–î
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å ID, –∏–º–µ–Ω–µ–º –∏ –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞–º–∏

### 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞–º–∏ –ø–æ –ø–∞—Ü–∏–µ–Ω—Ç–∫–∞–º
- **PUT** `/sim/medications/{patient_id}` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–∞—Ü–∏–µ–Ω—Ç–∫–∏
- –û–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã –≤ –ë–î –∏ –≤ —Å–∏–º—É–ª—è—Ç–æ—Ä–µ
- –°—Ç–∞—Ä—ã–π POST `/sim/medications` –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ deprecated

## üìã –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ API

### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### GET /patients
```http
GET /patients
Content-Type: application/json
```

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "id": "507f1f77bcf86cd799439011",
    "full_name": "–ò–≤–∞–Ω–æ–≤–∞ –ò.–ò.",
    "medications": ["–≥–∏–Ω–∏–ø—Ä–∞–ª", "–º–∞–≥–Ω–µ–∑–∏—è"]
  }
]
```

#### PUT /sim/medications/{patient_id}
```http
PUT /sim/medications/507f1f77bcf86cd799439011
Content-Type: application/json

{
  "medications": ["–≥–∏–Ω–∏–ø—Ä–∞–ª", "–º–∞–≥–Ω–µ–∑–∏—è", "–æ–∫—Å–∏—Ç–æ—Ü–∏–Ω"]
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "Medications updated for patient",
  "patient_id": "507f1f77bcf86cd799439011",
  "medications": ["–≥–∏–Ω–∏–ø—Ä–∞–ª", "–º–∞–≥–Ω–µ–∑–∏—è", "–æ–∫—Å–∏—Ç–æ—Ü–∏–Ω"]
}
```

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### POST /sim/medications (deprecated)
- –ü–æ–º–µ—á–µ–Ω –∫–∞–∫ —É—Å—Ç–∞—Ä–µ–≤—à–∏–π
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PUT /sim/medications/{patient_id}
- –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ realtime_api.py

1. **–î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Ä–æ—É—Ç GET /patients:**
```python
@app.get("/patients", response_model=List[PatientOut])
async def get_all_patients() -> List[PatientOut]:
    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–∫ –∏–∑ –ë–î
```

2. **–ò–∑–º–µ–Ω–µ–Ω —Ä–æ—É—Ç –¥–ª—è –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤:**
```python
@app.put("/sim/medications/{patient_id}")
async def set_patient_medications(
    patient_id: str = Path(..., description="Mongo ObjectId –ø–∞—Ü–∏–µ–Ω—Ç–∫–∏"),
    payload: SimulatorMedications = None
):
    # –û–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–∞—Ü–∏–µ–Ω—Ç–∫–∏ –≤ –ë–î
```

3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω —Å—Ç–∞—Ä—ã–π —Ä–æ—É—Ç –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:**
```python
@app.post("/sim/medications", deprecated=True)
async def set_medications_legacy(payload: SimulatorMedications):
    # –°—Ç–∞—Ä—ã–π —Ä–æ—É—Ç –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ deprecated
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –ë–î

- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `updated_at` –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤
- –ò–Ω–¥–µ–∫—Å—ã –æ—Å—Ç–∞–ª–∏—Å—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

## üé® React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç PatientManagement.jsx

**–§—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–∫
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–∫
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```jsx
import PatientManagement from './PatientManagement';

<PatientManagement apiUrl="http://localhost:8080" />
```

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π App.jsx

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤–∫–ª–∞–¥–æ–∫ (–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ / –ü–∞—Ü–∏–µ–Ω—Ç–∫–∏)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PatientManagement
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏

**–§–∞–π–ª:** `App_with_patients.jsx`

## üì± –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –í–∫–ª–∞–¥–∫–∞ "–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥"
- –ü–ª–∞–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ FHR –∏ UC
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø–∞—Ç–æ–ª–æ–≥–∏–π

### –í–∫–ª–∞–¥–∫–∞ "–ü–∞—Ü–∏–µ–Ω—Ç–∫–∏"
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–∫
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–∫
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞–º–∏
- –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –û–±–Ω–æ–≤–∏—Ç–µ API
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ä—ã–π API
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π
python realtime_api.py
```

### 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```jsx
// –í–º–µ—Å—Ç–æ App.jsx –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ App_with_patients.jsx
import App from './App_with_patients';

// –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ PatientManagement
import PatientManagement from './PatientManagement';
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
curl http://localhost:8080/patients
curl -X PUT http://localhost:8080/sim/medications/ID -d '{"medications":["–≥–∏–Ω–∏–ø—Ä–∞–ª"]}'
```

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### JavaScript/React

```javascript
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–∫
const patients = await fetch('http://localhost:8080/patients').then(r => r.json());

// –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã –¥–ª—è –ø–∞—Ü–∏–µ–Ω—Ç–∫–∏
await fetch(`http://localhost:8080/sim/medications/${patientId}`, {
  method: 'PUT',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ medications: ['–≥–∏–Ω–∏–ø—Ä–∞–ª', '–º–∞–≥–Ω–µ–∑–∏—è'] })
});
```

### Python

```python
import requests

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–∫
patients = requests.get('http://localhost:8080/patients').json()

# –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã
response = requests.put(
    f'http://localhost:8080/sim/medications/{patient_id}',
    json={'medications': ['–≥–∏–Ω–∏–ø—Ä–∞–ª', '–º–∞–≥–Ω–µ–∑–∏—è']}
)
```

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è

### –° —Å—Ç–∞—Ä–æ–≥–æ API –Ω–∞ –Ω–æ–≤—ã–π

**–°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±:**
```javascript
// –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
fetch('/sim/medications', {
  method: 'POST',
  body: JSON.stringify({ medications: ['–≥–∏–Ω–∏–ø—Ä–∞–ª'] })
});
```

**–ù–æ–≤—ã–π —Å–ø–æ—Å–æ–±:**
```javascript
// –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
fetch(`/sim/medications/${patientId}`, {
  method: 'PUT',
  body: JSON.stringify({ medications: ['–≥–∏–Ω–∏–ø—Ä–∞–ª'] })
});
```

## üêõ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ö–æ–¥—ã –æ—à–∏–±–æ–∫
- `400` - –ù–µ–≤–µ—Ä–Ω—ã–π ID –ø–∞—Ü–∏–µ–Ω—Ç–∫–∏
- `404` - –ü–∞—Ü–∏–µ–Ω—Ç–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- `500` - –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

### –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏
```javascript
try {
  const response = await fetch(`/sim/medications/${patientId}`, {
    method: 'PUT',
    body: JSON.stringify({ medications })
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(`–û—à–∏–±–∫–∞ ${response.status}: ${error.detail}`);
  }
  
  const result = await response.json();
  console.log('–£—Å–ø–µ—à–Ω–æ:', result);
  
} catch (error) {
  console.error('–û—à–∏–±–∫–∞:', error.message);
}
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–∞—Ü–∏–µ–Ω—Ç–æ–∫
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ UI

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–≥–∏–Ω–∞—Ü–∏—é –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
- –ö—ç—à–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–∞—Ü–∏–µ–Ω—Ç–æ–∫
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏ —Å–µ—Ç–∏

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ ObjectId –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∫ –ë–î
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–æ–∫ –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤

### –û—à–∏–±–∫–∏
- –ù–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –¥–µ—Ç–∞–ª–∏ –ë–î
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üìù Changelog

### v0.2.0
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω GET /patients
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω POST /sim/medications –Ω–∞ PUT /sim/medications/{patient_id}
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç PatientManagement
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –≤–∫–ª–∞–¥–∫–∞–º–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### v0.1.0
- ‚úÖ –ë–∞–∑–æ–≤—ã–π API –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- ‚úÖ –°–∏–º—É–ª—è—Ç–æ—Ä –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü–æ—Ç–æ–∫–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é API (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 0.2.0+)
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ ObjectId
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Swagger UI –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç–∫–∞–º–∏ —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º API! üéâ
